CREATE TABLE GRUPO (
    ID_GRUPO numeric NOT NULL,
    NOME text UNIQUE NOT NULL,
    DESCRICAO text NOT NULL,
    PRIMARY KEY(ID_GRUPO)
);

CREATE SEQUENCE seq_grupo
 START WITH     1
 INCREMENT BY   1


CREATE TABLE REGRA (
    ID_REGRA numeric NOT NULL,
    NOME text UNIQUE NOT NULL,
    PRIMARY KEY(ID_REGRA)
);

CREATE SEQUENCE seq_regra
 START WITH     1
 INCREMENT BY   1


CREATE TABLE USUARIO_GRUPO (
    ID_USUARIO numeric NOT NULL,
    ID_GRUPO numeric NOT NULL,
    PRIMARY KEY(ID_USUARIO, ID_GRUPO),
    CONSTRAINT FK_USUARIO_USU_GRUPO FOREIGN KEY (ID_USUARIO) REFERENCES USUARIO (ID_USUARIO),
  	CONSTRAINT FK_GRUPO_USU_GRUPO FOREIGN KEY (ID_GRUPO) REFERENCES GRUPO (ID_GRUPO)
);

CREATE TABLE GRUPO_REGRA (
    ID_GRUPO numeric NOT NULL,
    ID_REGRA numeric NOT NULL,
    PRIMARY KEY(ID_GRUPO, ID_REGRA),
    CONSTRAINT FK_GRUPO_GRUPO_REGRA FOREIGN KEY (ID_GRUPO) REFERENCES GRUPO (ID_GRUPO),
  	CONSTRAINT FK_REGRA_GRUPO_REGRA FOREIGN KEY (ID_REGRA) REFERENCES REGRA (ID_REGRA)
);


insert into usuario (id_usuario, login, senha)
     values (nextval('seq_usuario'), 'admin', '$2a$10$X.AxPaR2usWOKRyUT2ZX/.k5sdTQNkSUly3AlSibvxImFrNb9ulAu'); --2
     
insert into usuario (id_usuario, login, senha)
     values (nextval('seq_usuario'), 'user', '$2a$10$X.AxPaR2usWOKRyUT2ZX/.k5sdTQNkSUly3AlSibvxImFrNb9ulAu'); --3

insert into usuario (id_usuario, login, senha)
     values (nextval('seq_usuario'), 'marketing', '$2a$10$X.AxPaR2usWOKRyUT2ZX/.k5sdTQNkSUly3AlSibvxImFrNb9ulAu'); --4
     

INSERT INTO REGRA (ID_REGRA, NOME)
VALUES (nextval('seq_regra'), 'ROLE_ADMIN'); -- 1

INSERT INTO REGRA (ID_REGRA, NOME)
VALUES (nextval('seq_regra'), 'ROLE_USUARIO'); -- 2

INSERT INTO REGRA (ID_REGRA, NOME)
VALUES (nextval('seq_regra'), 'ROLE_MARKETING'); -- 3


INSERT INTO GRUPO (ID_GRUPO, NOME, DESCRICAO)
VALUES (nextval('seq_grupo'), 'Administradores', 'Grupo de admins');

INSERT INTO GRUPO (ID_GRUPO, NOME, DESCRICAO)
VALUES (nextval('seq_grupo'), 'Cadastro', 'Grupo de cadastro');

INSERT INTO GRUPO (ID_GRUPO, NOME, DESCRICAO)
VALUES (nextval('seq_grupo'), 'Marketing', 'Grupo de Marketing');



INSERT INTO GRUPO_REGRA (ID_GRUPO, ID_REGRA)
VALUES (1, 1); 

INSERT INTO GRUPO_REGRA (ID_GRUPO, ID_REGRA)
VALUES (1, 2); 

INSERT INTO GRUPO_REGRA (ID_GRUPO, ID_REGRA)
VALUES (1, 3); 

INSERT INTO GRUPO_REGRA (ID_GRUPO, ID_REGRA)
VALUES (2, 2); 

INSERT INTO GRUPO_REGRA (ID_GRUPO, ID_REGRA)
VALUES (3, 3); 



INSERT INTO USUARIO_GRUPO (ID_USUARIO, ID_GRUPO)
VALUES (1,1); --DAVID / ADMIN

INSERT INTO USUARIO_GRUPO (ID_USUARIO, ID_GRUPO)
VALUES (2,1); --ADMIN / ADMIN

INSERT INTO USUARIO_GRUPO (ID_USUARIO, ID_GRUPO)
VALUES (3,2); --USER / USUARIO

INSERT INTO USUARIO_GRUPO (ID_USUARIO, ID_GRUPO)
VALUES (4,3); --MARKETING / MARKETING

drop table usuario_grupo